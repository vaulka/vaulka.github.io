<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Vaulka">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
        
            <link rel="preconnect" href="https://npm.elemecdn.com" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://www.vaulka.com/docker-study/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="为什么用 Docker首先让我们来回顾一下过往至今的服务部署方案。     特性 容器 虚拟机    启动 秒级 分钟级   硬盘使用 一般为 MB 一般为 GB   性能 接近原生 弱于   系统支持量 单机支持上千个容器 一般几十个    传统部署时代： 早期，各个组织机构在物理服务器上运行应用程序。无法为物理服务器中的应用程序定义资源边界，这会导致资源分配问题。 例如，如果在物理服务器上运行">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker 入门指北">
<meta property="og:url" content="https://www.vaulka.com/docker-study/index.html">
<meta property="og:site_name">
<meta property="og:description" content="为什么用 Docker首先让我们来回顾一下过往至今的服务部署方案。     特性 容器 虚拟机    启动 秒级 分钟级   硬盘使用 一般为 MB 一般为 GB   性能 接近原生 弱于   系统支持量 单机支持上千个容器 一般几十个    传统部署时代： 早期，各个组织机构在物理服务器上运行应用程序。无法为物理服务器中的应用程序定义资源边界，这会导致资源分配问题。 例如，如果在物理服务器上运行">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/%E9%83%A8%E7%BD%B2%E6%97%B6%E4%BB%A3.svg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E6%8C%87%E6%95%B0.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Architecture.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Commands%20Diagram.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641265787846.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641633942857.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641634424562.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635082632.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635526147.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635585080.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635782084.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636413731.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636650278.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636754676.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641637064512.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Architecture.png">
<meta property="article:published_time" content="2021-12-30T08:03:14.843Z">
<meta property="article:modified_time" content="2023-06-26T02:22:55.304Z">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="Docker Swarm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/vaulka/pic@main/%E9%83%A8%E7%BD%B2%E6%97%B6%E4%BB%A3.svg">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/vaulka/pic@main/origin-logo.1-fc8493fcd5f449be9d87c141c1a93ac9.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/vaulka/pic@main/origin-logo.1-fc8493fcd5f449be9d87c141c1a93ac9.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/vaulka/pic@main/origin-logo.1-fc8493fcd5f449be9d87c141c1a93ac9.png">
    <!--- Page Info-->
    
    <title>
        
            Docker 入门指北 -
        
        Vaulka&#39;s blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fonts/fonts.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fonts/Satoshi/satoshi.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fonts/Chillax/chillax.css">
    <!--- Font Part-->
    
        <link href="" rel="stylesheet">
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"www.vaulka.com","root":"/","language":"zh-CN","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"static","image":{"light":"https://cdn.jsdelivr.net/gh/vaulka/pic@main/wallpaper.4-253bbc0adef14eeeb5212b94f99ee5fb.webp","dark":"https://cdn.jsdelivr.net/gh/vaulka/pic@main/wallpaper.4-253bbc0adef14eeeb5212b94f99ee5fb.webp"},"title":"Hi,Friend","subtitle":{"text":["好久不見，今日營業中"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"4rem","subtitle_size":"1.5rem","line_height":0.8},"custom_font":{"enable":true,"family":null,"url":null},"social_links":{"enable":false,"links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.2.1","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"tags":{"path":"/tags/","icon":"fa-solid fa-tags"},"categories":{"path":"/categories/","icon":"fa-solid fa-folder"},"friends":{"icon":"fa-solid fa-link","path":"/links/"},"GitHub":{"icon":"fa-brands fa-github","path":"https://github.com/vaulka"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":null},"article_date_format":"YYYY-MM-DD","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/02/09 16:07:59"};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    Global.data_config = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/origin-logo.1-fc8493fcd5f449be9d87c141c1a93ac9.png">
                </a>
            
            <a class="logo-title" href="/">
                
                Vaulka&#39;s blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags/"  >
                                    
                                        
                                            <i class="fa-solid fa-tags"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories/"  >
                                    
                                        
                                            <i class="fa-solid fa-folder"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/links/"  >
                                    
                                        
                                            <i class="fa-solid fa-link"></i>
                                        
                                        友情链接
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    target="_blank" rel="noopener" href="https://github.com/vaulka"  >
                                    
                                        
                                            <i class="fa-brands fa-github"></i>
                                        
                                        GITHUB
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags/"  >
                             
                                
                                    <i class="fa-solid fa-tags"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories/"  >
                             
                                
                                    <i class="fa-solid fa-folder"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/links/"  >
                             
                                
                                    <i class="fa-solid fa-link"></i>
                                
                                友情链接
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        target="_blank" rel="noopener" href="https://github.com/vaulka"  >
                             
                                
                                    <i class="fa-brands fa-github"></i>
                                
                                GITHUB
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">Docker 入门指北</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/IMG_7805.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Vaulka</span>
                            
                                <span class="author-label">Lv2</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2021-12-30 16:03:14</span>
        <span class="mobile">2021-12-30 16:03</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-06-26 10:22:55</span>
            <span class="mobile">2023-06-26 10:22</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Docker/">Docker</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Docker-Swarm/">Docker Swarm</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>9.7k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>45 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="为什么用-Docker"><a href="#为什么用-Docker" class="headerlink" title="为什么用 Docker"></a>为什么用 Docker</h1><p>首先让我们来回顾一下过往至今的服务部署方案。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/%E9%83%A8%E7%BD%B2%E6%97%B6%E4%BB%A3.svg"
                      alt="部署时代"
                ></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>容器</th>
<th>虚拟机</th>
</tr>
</thead>
<tbody><tr>
<td>启动</td>
<td>秒级</td>
<td>分钟级</td>
</tr>
<tr>
<td>硬盘使用</td>
<td>一般为 MB</td>
<td>一般为 GB</td>
</tr>
<tr>
<td>性能</td>
<td>接近原生</td>
<td>弱于</td>
</tr>
<tr>
<td>系统支持量</td>
<td>单机支持上千个容器</td>
<td>一般几十个</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>传统部署时代：</strong></p>
<p>早期，各个组织机构在物理服务器上运行应用程序。无法为物理服务器中的应用程序定义资源边界，这会导致资源分配问题。 例如，如果在物理服务器上运行多个应用程序，则可能会出现一个应用程序占用大部分资源的情况，<br>结果可能导致其他应用程序的性能下降。 一种解决方案是在不同的物理服务器上运行每个应用程序，但是由于资源利用不足而无法扩展， 并且维护许多物理服务器的成本很高。有如下缺点：</p>
<ul>
<li>环境配置麻烦，不同操作系统或者版本不同导致安装方式不同。</li>
<li>资源分配不均匀，一个程序占用大部分资源的情况，可能导致其他应用程序性能下降。</li>
</ul>
</li>
<li><p><strong>虚拟化部署时代：</strong></p>
<p>作为解决方案，引入了虚拟化。虚拟化技术允许你在单个物理服务器的 CPU 上运行多个虚拟机（VM）。 虚拟化允许应用程序在 VM 之间隔离，并提供一定程度的安全，因为一个应用程序的信息 不能被另一应用程序随意访问。</p>
<p>虚拟化技术能够更好地利用物理服务器上的资源，并且因为可轻松地添加或更新应用程序 而可以实现更好的可伸缩性，降低硬件成本等等。</p>
<p>每个 VM 是一台完整的计算机，在虚拟化硬件之上运行所有组件，包括其自己的操作系统。现还有如下缺点：</p>
<ul>
<li>资源占用多，虚拟机会独占一部分内存和硬盘空间。它运行的时候，其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有 1MB，虚拟机依然需要几百 MB 的内存才能运行。</li>
<li>冗余步骤多，虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录。</li>
<li>启动慢，启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行。</li>
</ul>
</li>
<li><p><strong>容器部署时代：</strong></p>
<p>作为解决方案，引入了容器。容器类似于 VM，但是它们具有被放宽的隔离属性，可以在应用程序之间共享操作系统（OS）。 因此，容器被认为是轻量级的。容器与 VM 类似，具有自己的文件系统、CPU、内存、进程空间等。<br>由于它们与基础架构分离，因此可以跨云和 OS 发行版本进行移植。</p>
<p>容器因具有许多优势而变得流行起来。下面列出的是容器的一些好处：</p>
<ul>
<li>敏捷应用程序的创建和部署：与使用 VM 镜像相比，提高了容器镜像创建的简便性和效率。</li>
<li>持续开发、集成和部署：通过快速简单的回滚（由于镜像不可变性），支持可靠且频繁的 容器镜像构建和部署。</li>
<li>关注开发与运维的分离：在构建&#x2F;发布时而不是在部署时创建应用程序容器镜像， 从而将应用程序与基础架构分离。</li>
<li>可观察性：不仅可以显示操作系统级别的信息和指标，还可以显示应用程序的运行状况和其他指标信号。</li>
<li>跨开发、测试和生产的环境一致性：在便携式计算机上与在云中相同地运行。</li>
<li>跨云和操作系统发行版本的可移植性：可在 Ubuntu、RHEL、CoreOS、本地、 Google Kubernetes Engine 和其他任何地方运行。</li>
<li>以应用程序为中心的管理：提高抽象级别，从在虚拟硬件上运行 OS 到使用逻辑资源在 OS 上运行应用程序。</li>
<li>松散耦合、分布式、弹性、解放的微服务：应用程序被分解成较小的独立部分， 并且可以动态部署和管理 - 而不是在一台大型单机上整体运行。</li>
<li>资源隔离：可预测的应用程序性能。</li>
<li>资源利用：高效率和高密度。</li>
</ul>
</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20%E7%99%BE%E5%BA%A6%E6%90%9C%E7%B4%A2%E6%8C%87%E6%95%B0.png"
                      alt="Docker 百度搜索指数"
                ></p>
<p>自从 2013 年 Docker 问世以来，凭借其容器化运行时的特点，风靡世界，搜索指数一路高升。各个大厂现已经将生产环境用于容器部署，该技术已成为未来的大势所趋。</p>
<h1 id="Docker-安装"><a href="#Docker-安装" class="headerlink" title="Docker 安装"></a>Docker 安装</h1><ul>
<li><p>Window 操作系统</p>
<blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/desktop/windows/install/" >Install Docker Desktop on Windows <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
</li>
<li><p>Mac OS 操作系统</p>
<blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/desktop/mac/install/" >Install Docker Desktop on Mac <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
</li>
<li><p>CentOS 操作系统</p>
<blockquote>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/" >Install Docker Engine on CentOS <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
</li>
</ul>
<p>安装完成后，可执行 <code>docker version</code> 命令，验证是否安装成功。</p>
<h1 id="Docker-概念"><a href="#Docker-概念" class="headerlink" title="Docker 概念"></a>Docker 概念</h1><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Architecture.png"
                      alt="Docker Architecture"
                ></p>
<h2 id="Docker-镜像仓库（Repository）-集中存放镜像文件的地方"><a href="#Docker-镜像仓库（Repository）-集中存放镜像文件的地方" class="headerlink" title="Docker 镜像仓库（Repository） 集中存放镜像文件的地方"></a>Docker 镜像仓库（Repository） 集中存放镜像文件的地方</h2><p>镜像构建完成后，可以很容易的在当前宿主上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。</p>
<p>一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。所以说：镜像仓库是Docker用来集中存放镜像文件的地方类似于我们之前常用的代码仓库。</p>
<p>通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本 。我们可以通过 &lt;仓库名&gt;:&lt;标签&gt; 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。</p>
<p>这里补充一下 Docker Registry 公开服务和私有 Docker Registry 的概念：</p>
<p>Docker Registry 公开服务是开放给用户使用、允许用户管理镜像的 Registry 服务。一般这类公开服务允许用户免费上传、下载公开的镜像，并可能提供收费服务供用户管理私有镜像。</p>
<p>最常使用的 Registry 公开服务是官方的 Docker Hub ，这也是默认的 Registry，并拥有大量的高质量的官方镜像，网址为：hub.docker.com&#x2F; 。在国内访问 Docker Hub<br>可能会比较慢国内也有一些云服务商提供类似于 Docker Hub 的公开服务。</p>
<p>除了使用公开服务外，用户还可以在本地搭建私有 Docker Registry。Docker 官方提供了 Docker Registry 镜像，可以直接使用做为私有 Registry 服务。开源的 Docker Registry 镜像只提供了<br>Docker Registry API 的服务端实现，足以支持 Docker 命令，不影响使用。但不包含图形界面，以及镜像维护、用户管理、访问控制等高级功能。</p>
<h2 id="Docker-镜像（Image）一个特殊的文件系统"><a href="#Docker-镜像（Image）一个特殊的文件系统" class="headerlink" title="Docker 镜像（Image）一个特殊的文件系统"></a>Docker 镜像（Image）一个特殊的文件系统</h2><p>操作系统分为内核和用户空间。对于 Linux 而言，内核启动后，会挂载 root 文件系统为其提供用户空间支持。而 Docker 镜像（Image），就相当于是一个 root 文件系统。</p>
<p>Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。 镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p>
<p>Docker 设计时，就充分利用 Union FS 的技术，将其设计为分层存储的架构。 镜像实际是由多层文件系统联合组成。</p>
<p>镜像构建时，会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。</p>
<p>分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需的内容，构建新的镜像。</p>
<h2 id="Docker-容器（Container）镜像运行时的实体"><a href="#Docker-容器（Container）镜像运行时的实体" class="headerlink" title="Docker 容器（Container）镜像运行时的实体"></a>Docker 容器（Container）镜像运行时的实体</h2><p>镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</p>
<p>容器的实质是进程，但与直接在宿主执行的进程不同，容器进程运行于属于自己的独立的命名空间。前面讲过镜像使用的是分层存储，容器也是如此。</p>
<p>容器存储层的生存周期和容器一样，容器消亡时，容器存储层也随之消亡。因此，任何保存于容器存储层的信息都会随容器删除而丢失。</p>
<p>按照 Docker 最佳实践的要求，容器不应该向其存储层内写入任何数据<br>，容器存储层要保持无状态化。所有的文件写入操作，都应该使用数据卷（Volume）、或者绑定宿主目录，在这些位置的读写会跳过容器存储层，直接对宿主（或网络存储）发生读写，其性能和稳定性更高。数据卷的生存周期独立于容器，容器消亡，数据卷不会消亡。因此，<br>使用数据卷后，容器可以随意删除、重新 run，数据却不会丢失。</p>
<h1 id="Docker-指令（Command）"><a href="#Docker-指令（Command）" class="headerlink" title="Docker 指令（Command）"></a>Docker 指令（Command）</h1><p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/run/" >官方 Docker CLI 参考资料 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Commands%20Diagram.png"
                      alt="Docker Commands Diagram"
                ></p>
<p>让我们执行下 <code>docker --help</code> 查看一共有哪些命令，先混个眼熟：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker --<span class="built_in">help</span></span></span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --config string      Location of client config files (default</span><br><span class="line">                           &quot;C:\\Users\\AATROX\\.docker&quot;)</span><br><span class="line">  -c, --context string     Name of the context to use to connect to the</span><br><span class="line">                           daemon (overrides DOCKER_HOST env var and</span><br><span class="line">                           default context set with &quot;docker context use&quot;)</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  -l, --log-level string   Set the logging level</span><br><span class="line">                           (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;)</span><br><span class="line">                           (default &quot;info&quot;)</span><br><span class="line">      --tls                Use TLS; implied by --tlsverify</span><br><span class="line">      --tlscacert string   Trust certs signed only by this CA (default</span><br><span class="line">                           &quot;C:\\Users\\AATROX\\.docker\\ca.pem&quot;)</span><br><span class="line">      --tlscert string     Path to TLS certificate file (default</span><br><span class="line">                           &quot;C:\\Users\\AATROX\\.docker\\cert.pem&quot;)</span><br><span class="line">      --tlskey string      Path to TLS key file (default</span><br><span class="line">                           &quot;C:\\Users\\AATROX\\.docker\\key.pem&quot;)</span><br><span class="line">      --tlsverify          Use TLS and verify the remote</span><br><span class="line">  -v, --version            Print version information and quit</span><br><span class="line"></span><br><span class="line">Management Commands:</span><br><span class="line">  builder     Manage builds</span><br><span class="line">  buildx*     Docker Buildx (Docker Inc., v0.7.1)</span><br><span class="line">  compose*    Docker Compose (Docker Inc., v2.2.1)</span><br><span class="line">  config      Manage Docker configs</span><br><span class="line">  container   Manage containers</span><br><span class="line">  context     Manage contexts</span><br><span class="line">  image       Manage images</span><br><span class="line">  manifest    Manage Docker image manifests and manifest lists</span><br><span class="line">  network     Manage networks</span><br><span class="line">  node        Manage Swarm nodes</span><br><span class="line">  plugin      Manage plugins</span><br><span class="line">  scan*       Docker Scan (Docker Inc., v0.14.0)</span><br><span class="line">  secret      Manage Docker secrets</span><br><span class="line">  service     Manage services</span><br><span class="line">  stack       Manage Docker stacks</span><br><span class="line">  swarm       Manage Swarm</span><br><span class="line">  system      Manage Docker</span><br><span class="line">  trust       Manage trust on Docker images</span><br><span class="line">  volume      Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  attach      Attach local standard input, output, and error streams to a running container</span><br><span class="line">  build       Build an image from a Dockerfile</span><br><span class="line">  commit      Create a new image from a container&#x27;s changes</span><br><span class="line">  cp          Copy files/folders between a container and the local filesystem</span><br><span class="line">  create      Create a new container</span><br><span class="line">  diff        Inspect changes to files or directories on a container&#x27;s filesystem</span><br><span class="line">  events      Get real time events from the server</span><br><span class="line">  exec        Run a command in a running container</span><br><span class="line">  export      Export a container&#x27;s filesystem as a tar archive</span><br><span class="line">  history     Show the history of an image</span><br><span class="line">  images      List images</span><br><span class="line">  import      Import the contents from a tarball to create a filesystem image</span><br><span class="line">  info        Display system-wide information</span><br><span class="line">  inspect     Return low-level information on Docker objects</span><br><span class="line">  kill        Kill one or more running containers</span><br><span class="line">  load        Load an image from a tar archive or STDIN</span><br><span class="line">  login       Log in to a Docker registry</span><br><span class="line">  logout      Log out from a Docker registry</span><br><span class="line">  logs        Fetch the logs of a container</span><br><span class="line">  pause       Pause all processes within one or more containers</span><br><span class="line">  port        List port mappings or a specific mapping for the container</span><br><span class="line">  ps          List containers</span><br><span class="line">  pull        Pull an image or a repository from a registry</span><br><span class="line">  push        Push an image or a repository to a registry</span><br><span class="line">  rename      Rename a container</span><br><span class="line">  restart     Restart one or more containers</span><br><span class="line">  rm          Remove one or more containers</span><br><span class="line">  rmi         Remove one or more images</span><br><span class="line">  run         Run a command in a new container</span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">  start       Start one or more stopped containers</span><br><span class="line">  stats       Display a live stream of container(s) resource usage statistics</span><br><span class="line">  stop        Stop one or more running containers</span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">  top         Display the running processes of a container</span><br><span class="line">  unpause     Unpause all processes within one or more containers</span><br><span class="line">  update      Update configuration of one or more containers</span><br><span class="line">  version     Show the Docker version information</span><br><span class="line">  wait        Block until one or more containers stop, then print their exit codes</span><br></pre></td></tr></table></figure></div>

<p>相信大家看到一堆指令就麻了，我在这里先列举出常用场景，依次指令挨个说明：</p>
<h2 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h2><p>显示系统信息。</p>
<p>示例：<code>docker info</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker info</span></span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line"> Context:    default</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Plugins:</span><br><span class="line">  buildx: Docker Buildx (Docker Inc., v0.7.1)</span><br><span class="line">  compose: Docker Compose (Docker Inc., v2.2.1)</span><br><span class="line">  scan: Docker Scan (Docker Inc., v0.14.0)</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 1</span><br><span class="line">  Running: 1</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 1</span><br><span class="line"> Server Version: 20.10.11</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: extfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line">  userxattr: false</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Cgroup Version: 1</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d</span><br><span class="line"> runc version: v1.0.2-0-g52b36a2</span><br><span class="line"> init version: de40ad0</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 5.10.16.3-microsoft-standard-WSL2</span><br><span class="line"> Operating System: Docker Desktop</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: x86_64</span><br><span class="line"> CPUs: 8</span><br><span class="line"> Total Memory: 19.44GiB</span><br><span class="line"> Name: docker-desktop</span><br><span class="line"> ID: OJZN:FRCZ:TF6M:Z7VD:SVIP:SH6Q:6BAO:FK3A:HPCG:27C5:LA5G:DJ5M</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Registry: https://index.docker.io/v1/</span><br><span class="line"> Labels:</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Registry Mirrors:</span><br><span class="line">  https://7g4zdb7j.mirror.aliyuncs.com/</span><br><span class="line"> Live Restore Enabled: false</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-version"><a href="#docker-version" class="headerlink" title="docker version"></a>docker version</h2><p>查看 Docker 以及相关组件版本信息。</p>
<p>示例：<code>docker version</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker version</span></span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line"> Cloud integration: v1.0.22</span><br><span class="line"> Version:           20.10.11</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.16.10</span><br><span class="line"> Git commit:        dea9396</span><br><span class="line"> Built:             Thu Nov 18 00:42:51 2021</span><br><span class="line"> OS/Arch:           windows/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.11</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.16.9</span><br><span class="line">  Git commit:       847da18</span><br><span class="line">  Built:            Thu Nov 18 00:35:39 2021</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.4.12</span><br><span class="line">  GitCommit:        7b11cfaabd73bb80907dd23182b9347b4245eb5d</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.2</span><br><span class="line">  GitCommit:        v1.0.2-0-g52b36a2</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h2><p>登录远程镜像仓库。</p>
<blockquote>
<p>WARN</p>
<p>如果同学没有远程仓库，则可先忽略此命令</p>
</blockquote>
<p>示例：<code>docker login --username=****@qq.com registry.cn-shanghai.aliyuncs.com</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker login --username=*****@qq.com registry.cn-shanghai.aliyuncs.com</span></span><br><span class="line"></span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-logout"><a href="#docker-logout" class="headerlink" title="docker logout"></a>docker logout</h2><p>退出远程仓库已登录账号信息。</p>
<blockquote>
<p>WARN</p>
<p>如果同学没有远程仓库，则可先忽略此命令</p>
</blockquote>
<p>示例：<code>docker logout registry.cn-shanghai.aliyuncs.com</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">logout</span> registry.cn-shanghai.aliyuncs.com</span></span><br><span class="line"></span><br><span class="line">Removing login credentials for registry.cn-shanghai.aliyuncs.com</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h2><p>从 <code>Docker Hub</code> 查找镜像。</p>
<p>示例：<code>docker search nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker search nginx</span></span><br><span class="line"></span><br><span class="line">NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">nginx                             Official build of Nginx.                        16043     [OK]</span><br><span class="line">jwilder/nginx-proxy               Automated Nginx reverse proxy for docker con…   2104                 [OK]</span><br><span class="line">richarvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   819                  [OK]</span><br><span class="line">jc21/nginx-proxy-manager          Docker container for managing Nginx proxy ho…   301</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-pull【高频率】"><a href="#docker-pull【高频率】" class="headerlink" title="docker pull【高频率】"></a>docker pull【高频率】</h2><p>从远程仓库拉取镜像。</p>
<h3 id="命令格式："><a href="#命令格式：" class="headerlink" title="命令格式："></a>命令格式：</h3><p><code> docker pull [OPTIONS] NAME[:TAG|@DIGEST]</code></p>
<h3 id="命令说明"><a href="#命令说明" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-a</code>：下载镜像仓库中该镜像名称的所有标签镜像。与 <code>TAG</code> 参数互斥，只能填一个。</li>
</ul>
</li>
<li><code>NAME</code>：镜像名称，如果没指定远程仓库地址的话，默认去 <code>Docker Hub</code> 获取镜像。</li>
<li><code>TAG</code>：标签，如果没指定的话，默认 TAG 为 <code>latest</code>。</li>
<li><code>@DIGEST</code>：镜像唯一ID。</li>
</ul>
<p>示例：<code>docker pull nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker pull nginx</span></span><br><span class="line"></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">a2abf6c4d29d: Pull complete</span><br><span class="line">a9edb18cadd1: Pull complete</span><br><span class="line">589b7251471a: Pull complete</span><br><span class="line">186b1aaa4aa6: Pull complete</span><br><span class="line">b4df32aa5a72: Pull complete</span><br><span class="line">a0bcbecc962e: Pull complete</span><br><span class="line">Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br></pre></td></tr></table></figure></div>

<h3 id="命令执行分析"><a href="#命令执行分析" class="headerlink" title="命令执行分析"></a>命令执行分析</h3><ol>
<li>命令补全，判断用户是否输入 <code>TAG</code> 参数等等，没输入的话按照默认参数进行补全。</li>
<li>识别 <code>OPTIONS</code> 参数是否填写，填写的话，则增加该参数的操作。</li>
<li>首先 <code>docker</code> 会根据 <code>name:tag@digest</code> 寻找远程仓库是否有该镜像。</li>
</ol>
<ul>
<li>如果没有该镜像，则报错。</li>
</ul>
<ol start="4">
<li>如果有该镜像，则通过 <code>name:tag@digest</code> 判断本地是否已存在该镜像。</li>
</ol>
<ul>
<li>先比对本地仓库是否有相同 <code>name:tag</code> 参数的镜像，如果有的话，则再比对 <code>@digest</code> 参数，如果镜像 <code>sha256</code> 一致的话，则不从远程仓库下载镜像，复用本地镜像。</li>
</ul>
<ol start="5">
<li>如果没有该镜像，则从远程仓库获取镜像。</li>
</ol>
<ul>
<li>如果是第三方镜像仓库，则会先判断是否需要登录，需要登录的话，会从本地已验证账号列表里面寻找与之匹配的账号密码，如果登录失败则拉取镜像失败。</li>
</ul>
<h2 id="docker-images【高频率】"><a href="#docker-images【高频率】" class="headerlink" title="docker images【高频率】"></a>docker images【高频率】</h2><p>查看镜像列表。</p>
<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker images [OPTIONS] [REPOSITORY[:TAG]]</code></p>
<h3 id="命令说明-1"><a href="#命令说明-1" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-a</code>：列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）。</li>
<li><code>--digests</code>：显示镜像的摘要信息。</li>
<li><code>-f</code>：添加过滤条件，使用 <code>key=value</code> 方式进行过滤，<code>key</code> 如下：<ul>
<li><code>dangling</code>：显示标记为空的镜像，值只有 <code>true</code> 和 <code>false</code>。</li>
<li>label：这个是根据标签进行过滤，其中 <code>lable </code>的值，是 <code>docker </code>在编译的时候配置的或者在 <code>Dockerfile</code> 中配置的。</li>
<li><code>before</code>：这个是根据时间来进行过滤，其中 <code>before</code> 的<code>value </code>表示某个镜像构建时间之前的镜像列表。</li>
<li><code>since</code>：跟 <code>before</code> 正好相反，表示的是在某个镜像构建之后构建的镜像。</li>
<li><code>reference</code>：这个是添加正则进行匹配。</li>
</ul>
</li>
<li><code>-q</code>：仅显示 <code>IMAGE ID</code>。</li>
</ul>
</li>
<li><code>REPOSITORY</code>：镜像名称，如果指定的话，则会只显示该 <code>REPOSITORY</code> 相关的镜像信息。</li>
<li><code>TAG</code>：标签，如果指定的话，则会只显示该 <code>REPOSITORY</code> 以及该 <code>TAG</code> 相关的镜像信息。</li>
</ul>
<p>示例：<code>docker images</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker images</span></span><br><span class="line"></span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">nginx        latest    605c77e624dd   13 hours ago   141MB</span><br></pre></td></tr></table></figure></div>

<h3 id="命令执行分析-1"><a href="#命令执行分析-1" class="headerlink" title="命令执行分析"></a>命令执行分析</h3><ol>
<li>识别 <code>OPTIONS</code> 参数是否填写，填写的话，则增加该参数的操作。</li>
<li>显示相关镜像信息。</li>
</ol>
<h2 id="docker-tag【高频率】"><a href="#docker-tag【高频率】" class="headerlink" title="docker tag【高频率】"></a>docker tag【高频率】</h2><p>创建一个新 <code>tag</code> 镜像。</p>
<h3 id="命令格式-1"><a href="#命令格式-1" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</code></p>
<h3 id="命令说明-2"><a href="#命令说明-2" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>SOURCE_IMAGE</code>：源镜像名称。</li>
<li><code>TARGET_IMAGE</code>：目标镜像名称。</li>
<li><code>TAG</code>：标签，如果没指定的话，默认 TAG 为 <code>latest</code>。</li>
</ul>
<p>示例：<code>docker tag nginx:latest nginx:my-tag-latest</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker tag nginx:latest nginx:my-tag-latest</span></span><br></pre></td></tr></table></figure></div>

<p>指令运行完毕后输入 <code>docker images</code> 即可看到一个 nginx 有一个新 <code>tag</code> <code>my-tag-latest</code> 的镜像。</p>
<h3 id="命令执行分析-2"><a href="#命令执行分析-2" class="headerlink" title="命令执行分析"></a>命令执行分析</h3><ol>
<li>命令补全，判断用户是否输入 <code>TAG</code> 参数等等，没输入的话按照默认参数进行补全。</li>
<li>根据源镜像信息拷贝一份到目标镜像信息。</li>
</ol>
<h2 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h2><p>显示镜像的历史。</p>
<p>一般用于查看镜像构建步骤，分析后可进行镜像瘦身、镜像改造等等。</p>
<h3 id="命令格式-2"><a href="#命令格式-2" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker history [OPTIONS] IMAGE[:TAG]</code></p>
<h3 id="命令说明-3"><a href="#命令说明-3" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-H</code>：以可读的格式打印镜像大小和日期，默认为 <code>true</code>。</li>
<li><code>--no-trunc</code>：显示完整的提交记录。</li>
<li><code>-q</code>：仅列出提交记录ID。</li>
</ul>
</li>
<li><code>TAG</code>：标签，如果指定的话，则会只显示该 <code>REPOSITORY</code> 以及该 <code>TAG</code> 相关的镜像信息。</li>
</ul>
<p>示例：<code>docker history nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">history</span> nginx</span></span><br><span class="line"></span><br><span class="line">605c77e624dd   13 hours ago   /bin/sh -c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemon…   0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  STOPSIGNAL SIGQUIT           0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  EXPOSE 80                    0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;/docker-entr…   0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop) COPY file:09a214a3e07c919a…   4.61kB</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7…   1.04kB</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop) COPY file:0b866ff3fc1ef5b0…   1.96kB</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop) COPY file:65504f71f5855ca0…   1.2kB</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -…   61.1MB</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~bullseye   0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.7.1        0B</span><br><span class="line">&lt;missing&gt;      13 hours ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.21.5     0B</span><br><span class="line">&lt;missing&gt;      9 days ago     /bin/sh -c #(nop)  LABEL maintainer=NGINX Do…   0B</span><br><span class="line">&lt;missing&gt;      9 days ago     /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B</span><br><span class="line">&lt;missing&gt;      9 days ago     /bin/sh -c #(nop) ADD file:09675d11695f65c55…   80.4MB</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>INFO</p>
<p>一个镜像由多个可读的镜像层组成，显示镜像历史的时候，会将最新的镜像层从上自下显示。</p>
</blockquote>
<h2 id="docker-push【高频率】"><a href="#docker-push【高频率】" class="headerlink" title="docker push【高频率】"></a>docker push【高频率】</h2><p>推送镜像至镜像仓库。</p>
<h3 id="命令格式-3"><a href="#命令格式-3" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker push [OPTIONS] NAME[:TAG]</code></p>
<h3 id="命令说明-4"><a href="#命令说明-4" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>NAME</code>：镜像名称。</li>
<li><code>TAG</code>：标签，如果指定的话，则会只显示该 <code>REPOSITORY</code> 以及该 <code>TAG</code> 相关的镜像信息。</li>
</ul>
<p>示例：<code>docker push nginx:vaulka-1.0.0</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker push nginx:vaulka-1.0.0</span></span><br><span class="line"></span><br><span class="line">The push refers to repository [docker.io/library/nginx]</span><br><span class="line">bc23383c378c: Preparing</span><br><span class="line">d874fd2bc83b: Preparing</span><br><span class="line">32ce5f6a5106: Preparing</span><br><span class="line">f1db227348d0: Preparing</span><br><span class="line">b8d6e692a25e: Preparing</span><br><span class="line">e379e8aedd4d: Waiting</span><br><span class="line">2edcec3590a4: Waiting</span><br><span class="line">denied: requested access to the resource is denied</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-rmi【高频率】"><a href="#docker-rmi【高频率】" class="headerlink" title="docker rmi【高频率】"></a>docker rmi【高频率】</h2><p>删除本地一个或多个镜像。</p>
<h3 id="命令格式-4"><a href="#命令格式-4" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker rmi [OPTIONS] IMAGE [IMAGE...]</code></p>
<h3 id="命令说明-5"><a href="#命令说明-5" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-f</code>：强制删除。</li>
<li><code>--no-prune</code>：不移除该镜像的过程镜像，默认移除。</li>
</ul>
</li>
<li><code>IMAGE</code>：<code>IMAGE ID</code> 或者 <code>NAME:TAG</code>。</li>
</ul>
<p>示例：<code>docker rmi -f nginx:latest</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker rmi -f nginx:latest</span></span><br><span class="line"></span><br><span class="line">Untagged: nginx:latest</span><br><span class="line">Untagged: nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31</span><br><span class="line">Deleted: sha256:605c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85</span><br><span class="line">Deleted: sha256:b625d8e29573fa369e799ca7c5df8b7a902126d2b7cbeb390af59e4b9e1210c5</span><br><span class="line">Deleted: sha256:7850d382fb05e393e211067c5ca0aada2111fcbe550a90fed04d1c634bd31a14</span><br><span class="line">Deleted: sha256:02b80ac2055edd757a996c3d554e6a8906fd3521e14d1227440afd5163a5f1c4</span><br><span class="line">Deleted: sha256:b92aa5824592ecb46e6d169f8e694a99150ccef01a2aabea7b9c02356cdabe7c</span><br><span class="line">Deleted: sha256:780238f18c540007376dd5e904f583896a69fe620876cabc06977a3af4ba4fb5</span><br><span class="line">Deleted: sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-run【高频率】"><a href="#docker-run【高频率】" class="headerlink" title="docker run【高频率】"></a>docker run【高频率】</h2><p>创建一个新的容器并运行一个命令。</p>
<h3 id="命令格式-5"><a href="#命令格式-5" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p>
<h3 id="命令说明-6"><a href="#命令说明-6" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-d</code>：后台运行容器，并返回容器ID。</li>
<li><code>-i</code>：以交互模式运行容器，通常与 <code>-t</code> 同时使用。</li>
<li><code>-p</code>：指定端口映射，格式为 <code>宿主机端口:容器端口/[tcp/udp]</code>，不填写默认 <code>tcp</code>。</li>
<li><code>-t</code>：为容器重新分配一个伪输入终端，通常与 <code>-i</code> 同时使用。</li>
<li><code>--name</code>：为容器指定一个名称。</li>
<li><code>-h</code>：指定容器的 <code>hostname</code>。</li>
<li><code>-e</code>：设置环境变量。</li>
<li><code>--network</code>：连接进一个网络。</li>
<li><code>--link</code>：添加链接到另一个容器。</li>
<li><code>--entrypoint</code>：覆盖默认的 <code>entrypoint</code>。</li>
<li><code>-v</code>：绑定一个数据卷，格式为 <code>宿主机路径:容器路径</code>。</li>
</ul>
</li>
<li><code>IMAGE</code>：<code>IMAGE ID</code> 或者 <code>NAME:TAG</code>。</li>
<li><code>COMMAND</code>：指令信息。</li>
<li><code>ARG...</code>：指令参数列表。</li>
</ul>
<p>示例：<code>docker run -d --name nginx -p 80:80/tcp -v C:/Users/AATROX/Downloads/index.html:/usr/share/nginx/html/index.html nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d --name nginx -p 80:80/tcp  -v C:/Users/AATROX/Downloads/index.html:/usr/share/nginx/html/index.html nginx</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="命令执行分析-3"><a href="#命令执行分析-3" class="headerlink" title="命令执行分析"></a>命令执行分析</h3><ol>
<li>命令补全，判断用户是否输入缺省属性 <code>-p [tcp/udp]</code> 参数等等，没输入的话按照默认参数进行补全。</li>
<li>首先 <code>docker</code> 会根据 <code>IMAGE</code> 寻找本地是否有该镜像，如果有的话则默认使用本地镜像，默认没有的话，则去远程仓库获取镜像。</li>
</ol>
<ul>
<li>如果没有该镜像，则报错。</li>
</ul>
<ol start="3">
<li>根据 <code>OPTIONS</code> 参数创建容器后并启动，然后执行容器 <code>COMMAND ARG...</code> 指令。</li>
</ol>
<ul>
<li>如果容器没有交互指令也并没有分配伪终端的话，则容器会进入暂停状态。</li>
</ul>
<h2 id="docker-ps【高频率】"><a href="#docker-ps【高频率】" class="headerlink" title="docker ps【高频率】"></a>docker ps【高频率】</h2><p>列出容器。</p>
<h3 id="命令格式-6"><a href="#命令格式-6" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker ps [OPTIONS]</code></p>
<h3 id="命令说明-7"><a href="#命令说明-7" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-a</code>：显示所有的容器，包括未运行的（默认只显示运行中的容器）。</li>
<li><code>-f</code>：根据条件过滤显示的内容。</li>
<li><code>-l</code>：显示最近创建的容器。</li>
<li><code>-n</code>：列出最近创建的 <code>n</code> 个容器。</li>
<li><code>-q</code>：只显示容器编号。</li>
<li><code>-s</code>：显示总的文件大小。</li>
</ul>
</li>
</ul>
<p>示例：<code>docker ps -a</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker ps -a</span></span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">6c13d872ee5d   nginx:vaulka-1.0.0   &quot;/docker-entrypoint.…&quot;   21 minutes ago   Up 21 minutes   80/tcp    vaulka</span><br><span class="line">d34742ff4e87   nginx                 &quot;/docker-entrypoint.…&quot;   3 days ago       Up 3 days       80/tcp    nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-exec【高频率】"><a href="#docker-exec【高频率】" class="headerlink" title="docker exec【高频率】"></a>docker exec【高频率】</h2><p>在运行的容器中执行命令。</p>
<p>一般用于启动容器后进入执行初始化信息或者排查容器信息。</p>
<h3 id="命令格式-7"><a href="#命令格式-7" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</code></p>
<h3 id="命令说明-8"><a href="#命令说明-8" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-e</code>：设置环境变量。</li>
<li><code>-i</code>：保持 <code>STDIN</code> 打开，即使没有连接。</li>
<li><code>-t</code>：分配一个伪 <code>TTY</code>。</li>
<li><code>-u</code>：用户名或 <code>UID</code>。</li>
<li><code>-w</code>：容器内的工作目录。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>ARG...</code>：<code>command</code> 指令参数列表。</li>
</ul>
<p>示例：<code>docker exec -it nginx /bin/bash</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">exec</span> -it nginx /bin/bash</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="docker-stop"><a href="#docker-stop" class="headerlink" title="docker stop"></a>docker stop</h2><p>停止一个或多个正在运行中的容器。</p>
<h3 id="命令格式-8"><a href="#命令格式-8" class="headerlink" title="命令格式"></a>命令格式</h3><p><code> docker stop [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<h3 id="命令说明-9"><a href="#命令说明-9" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-t</code>：在杀死它之前等待停止的秒数（默认 10）。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>CONTAINER...</code>：容器列表，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code> 列表。</li>
</ul>
<p>示例：<code>docker stop nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker stop nginx</span></span><br><span class="line"></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-start"><a href="#docker-start" class="headerlink" title="docker start"></a>docker start</h2><p>启动一个或多个已停止的容器。</p>
<h3 id="命令格式-9"><a href="#命令格式-9" class="headerlink" title="命令格式"></a>命令格式</h3><p><code> docker start[OPTIONS] CONTAINER [CONTAINER...]</code></p>
<h3 id="命令说明-10"><a href="#命令说明-10" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>CONTAINER...</code>：容器列表，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code> 列表。</li>
</ul>
<p>示例：<code>docker start nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker start nginx</span></span><br><span class="line"></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-restart"><a href="#docker-restart" class="headerlink" title="docker restart"></a>docker restart</h2><p>重启一个或多个容器。</p>
<h3 id="命令格式-10"><a href="#命令格式-10" class="headerlink" title="命令格式"></a>命令格式</h3><p><code> docker restart [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<h3 id="命令说明-11"><a href="#命令说明-11" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-t</code>：在杀死它之前等待停止的秒数（默认 10）。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>CONTAINER...</code>：容器列表，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code> 列表。</li>
</ul>
<p>示例：<code>docker restart nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker restart nginx</span></span><br><span class="line"></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-logs【高频率】"><a href="#docker-logs【高频率】" class="headerlink" title="docker logs【高频率】"></a>docker logs【高频率】</h2><p>获取容器的日志。</p>
<h3 id="命令格式-11"><a href="#命令格式-11" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker logs [OPTIONS] CONTAINER</code></p>
<h3 id="命令说明-12"><a href="#命令说明-12" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-f</code>：跟踪日志输出。</li>
<li><code>-t</code>：显示时间戳。</li>
<li><code>--tail</code>：仅列出最新 <code>n</code> 条容器日志。</li>
<li><code>--since</code>：显示某个开始时间的所有日志。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
</ul>
<p>示例：<code> docker logs -f -t --tail 10 nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> docker logs -f -t --<span class="built_in">tail</span> 10 nginx</span></span><br><span class="line"></span><br><span class="line">2022-01-04T01:48:35.491607254Z 2022/01/04 01:48:35 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span><br><span class="line">2022-01-04T01:48:35.491790545Z 2022/01/04 01:48:35 [notice] 1#1: start worker processes</span><br><span class="line">2022-01-04T01:48:35.492379907Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 24</span><br><span class="line">2022-01-04T01:48:35.492497245Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 25</span><br><span class="line">2022-01-04T01:48:35.492694700Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 26</span><br><span class="line">2022-01-04T01:48:35.492861997Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 27</span><br><span class="line">2022-01-04T01:48:35.494038216Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 28</span><br><span class="line">2022-01-04T01:48:35.494775667Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 29</span><br><span class="line">2022-01-04T01:48:35.495491899Z 2022/01/04 01:48:35 [notice] 1#1: start worker process 30</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h2><p>从容器创建一个新的镜像。</p>
<h3 id="命令格式-12"><a href="#命令格式-12" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</code></p>
<h3 id="命令说明-13"><a href="#命令说明-13" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-a</code>：提交的镜像作者。</li>
<li><code>-m</code>：提交时的说明文字。</li>
<li><code>-p</code>：在 <code>commit</code> 时，将容器暂停。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>REPOSITORY</code>：镜像名称，如果指定的话，则会只显示该 <code>REPOSITORY</code> 相关的镜像信息。</li>
<li><code>TAG</code>：标签，如果指定的话，则会只显示该 <code>REPOSITORY</code> 以及该 <code>TAG</code> 相关的镜像信息。</li>
</ul>
<p>示例：<code>docker commit -a &quot;Vaulka&quot; -m &quot;测试 commit&quot; nginx nginx:vaulka-1.0.0</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker commit -a <span class="string">&quot;Vaulka&quot;</span> -m <span class="string">&quot;测试 commit&quot;</span> nginx nginx:vaulka-1.0.0</span></span><br><span class="line"></span><br><span class="line">sha256:fe752a22bc4032c7c317661e39b8cc2e70112c3edd70dc4cbd314cf9102fb989</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-diff"><a href="#docker-diff" class="headerlink" title="docker diff"></a>docker diff</h2><p>检查容器里文件结构的更改。</p>
<h3 id="命令格式-13"><a href="#命令格式-13" class="headerlink" title="命令格式"></a>命令格式</h3><p><code> docker diff CONTAINER</code></p>
<h3 id="命令说明-14"><a href="#命令说明-14" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
</ul>
<p>示例：<code>docker diff nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker diff nginx</span></span><br><span class="line"></span><br><span class="line">A /vaulka</span><br><span class="line">C /root</span><br><span class="line">A /root/.bash_history</span><br><span class="line">C /run</span><br><span class="line">A /run/nginx.pid</span><br><span class="line">A /commit</span><br><span class="line">C /var</span><br><span class="line">C /var/cache</span><br><span class="line">C /var/cache/nginx</span><br><span class="line">A /var/cache/nginx/client_temp</span><br><span class="line">A /var/cache/nginx/fastcgi_temp</span><br><span class="line">A /var/cache/nginx/proxy_temp</span><br><span class="line">A /var/cache/nginx/scgi_temp</span><br><span class="line">A /var/cache/nginx/uwsgi_temp</span><br><span class="line">C /etc</span><br><span class="line">C /etc/nginx</span><br><span class="line">C /etc/nginx/conf.d</span><br><span class="line">C /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-cp"><a href="#docker-cp" class="headerlink" title="docker cp"></a>docker cp</h2><p>用于容器与主机之间的数据拷贝。</p>
<h3 id="命令格式-14"><a href="#命令格式-14" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</code><br><code>docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</code></p>
<h3 id="命令说明-15"><a href="#命令说明-15" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
</ul>
<p>将容器数据拷贝至本地 示例：<code>docker cp nginx:/etc/nginx D:\nginx</code></p>
<p>将本地数据拷贝至容器 示例：<code>docker cp D:\nginx nginx:/vaulka</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker cp nginx:/etc/nginx D:\nginx</span><br><span class="line"></span><br><span class="line">docker cp D:\nginx nginx:/vaulka</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="docker-rm【高频率】"><a href="#docker-rm【高频率】" class="headerlink" title="docker rm【高频率】"></a>docker rm【高频率】</h2><p>删除一个或多个容器。</p>
<h3 id="命令格式-15"><a href="#命令格式-15" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker rm [OPTIONS] CONTAINER [CONTAINER...]</code></p>
<h3 id="命令说明-16"><a href="#命令说明-16" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-f</code>：强制删除正在运行的容器。</li>
</ul>
</li>
<li><code>CONTAINER</code>：容器，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code>。</li>
<li><code>CONTAINER...</code>：容器列表，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code> 列表。</li>
</ul>
<p>示例：<code>docker rm -f nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">rm</span> -f nginx</span></span><br><span class="line"></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-events"><a href="#docker-events" class="headerlink" title="docker events"></a>docker events</h2><p>从服务器获取实时事件。</p>
<h3 id="命令格式-16"><a href="#命令格式-16" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker events [OPTIONS]</code></p>
<h3 id="命令说明-17"><a href="#命令说明-17" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-f</code>：根据条件过滤事件。</li>
<li><code>--since</code>：从指定的时间戳后显示所有事件。</li>
</ul>
</li>
</ul>
<p>示例：<code>docker events</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker events</span></span><br><span class="line"></span><br><span class="line">2022-01-04T10:08:15.221847318+08:00 container kill d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb (image=nginx, maintainer=NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;, name=nginx, signal=3)</span><br><span class="line">2022-01-04T10:08:15.410436756+08:00 container die d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb (exitCode=0, image=nginx, maintainer=NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;, name=nginx)</span><br><span class="line">2022-01-04T10:08:15.716204013+08:00 network disconnect f4645324feaef4dd22a2e8e1deafd7b4f68c7ab89862e1e6f13679fda4ff1ea0 (container=d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb, name=bridge, type=bridge)</span><br><span class="line">2022-01-04T10:08:15.745159367+08:00 container stop d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb (image=nginx, maintainer=NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;, name=nginx)</span><br><span class="line">2022-01-04T10:08:38.813402562+08:00 network connect f4645324feaef4dd22a2e8e1deafd7b4f68c7ab89862e1e6f13679fda4ff1ea0 (container=d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb, name=bridge, type=bridge)</span><br><span class="line">2022-01-04T10:08:39.207083007+08:00 container start d34742ff4e87e18e89c4886311a8e5de8f94657171c93582e83bd90347e761bb (image=nginx, maintainer=NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;, name=nginx)</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-stats"><a href="#docker-stats" class="headerlink" title="docker stats"></a>docker stats</h2><p>显示容器资源使用统计。</p>
<h3 id="命令格式-17"><a href="#命令格式-17" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker stats [OPTIONS] [CONTAINER...]</code></p>
<h3 id="命令说明-18"><a href="#命令说明-18" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-a</code>：显示所有容器（默认只显示正在运行状态的容器）。</li>
<li><code>--no-stream</code>：禁用实时流统计并只提取第一个结果。</li>
</ul>
</li>
<li><code>CONTAINER...</code>：容器列表，<code>CONTAINER ID</code> 或者 <code>CONTAINER NAME</code> 列表。</li>
</ul>
<p>示例：<code>docker stats nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker stats nginx</span></span><br><span class="line"></span><br><span class="line">CONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT    MEM %     NET I/O      BLOCK I/O   PIDS</span><br><span class="line">d34742ff4e87   nginx     0.00%     6.82MiB / 19.44GiB   0.03%     1.4kB / 0B   0B / 0B     9</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h2><p>获取容器&#x2F;镜像的元数据。</p>
<h3 id="命令格式-18"><a href="#命令格式-18" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker inspect [OPTIONS] NAME|ID [NAME|ID...]</code></p>
<h3 id="命令说明-19"><a href="#命令说明-19" class="headerlink" title="命令说明"></a>命令说明</h3><p>示例：<code>docker inspect nginx</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker inspect nginx</span></span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2022-01-04T02:12:17.816585871Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/docker-entrypoint.sh&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;nginx&quot;,</span><br><span class="line">            &quot;-g&quot;,</span><br><span class="line">            &quot;daemon off;&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 3737,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2022-01-04T02:12:18.432727092Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:605c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e/2f704ed68d4df4858a8b3e6d021232023147289dda0f678d9e2ceb8ec05b288e-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/nginx&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: [</span><br><span class="line">            &quot;c637bb6940f69036fef36e6770264339ba24ab58e7ef1da8958930aed26aa803&quot;,</span><br><span class="line">            &quot;e9e4b4c4736406c477a8cba9368c56583eb9e28b83833c4c9a6b0f866ba3d946&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;HostIp&quot;: &quot;&quot;,</span><br><span class="line">                        &quot;HostPort&quot;: &quot;80&quot;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                28,</span><br><span class="line">                120</span><br><span class="line">            ],</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;KernelMemory&quot;: 0,</span><br><span class="line">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/2bb3bc38ae00aca6bc1bc7d26f4da56750f77f0b6a81a89ba937bd17b78be950-init/diff:/var/lib/docker/overlay2/c3a2a8b2fedc7ffd8c432f4d3ac2a92329f7e3a1d3e726b772a986b2a4f31d89/diff:/var/lib/docker/overlay2/492236c88cfafc679b68d2571e89ceeef4b97587c898cd5f99d49de663eb4493/diff:/var/lib/docker/overlay2/ad4e499eba0be3d0ba80cf49305dd9e02b61e777788a55d4d0dd31b31da49f32/diff:/var/lib/docker/overlay2/c6f5403a8f442a482427508e250e074ca311d63664d114fcdbc15c8bed1bf2ba/diff:/var/lib/docker/overlay2/6c12a4051d37d441dc976c18f695bd1f1c7ae172d87e8f01f11c9bc2ddce5f57/diff:/var/lib/docker/overlay2/2c36a20eafffe17aae7ecf6688645319c64fbb4fb135626d889845522e1adb1f/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/2bb3bc38ae00aca6bc1bc7d26f4da56750f77f0b6a81a89ba937bd17b78be950/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/2bb3bc38ae00aca6bc1bc7d26f4da56750f77f0b6a81a89ba937bd17b78be950/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/2bb3bc38ae00aca6bc1bc7d26f4da56750f77f0b6a81a89ba937bd17b78be950/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;2f704ed68d4d&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,</span><br><span class="line">                &quot;NGINX_VERSION=1.21.5&quot;,</span><br><span class="line">                &quot;NJS_VERSION=0.7.1&quot;,</span><br><span class="line">                &quot;PKG_RELEASE=1~bullseye&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;nginx&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;daemon off;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;nginx&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: [</span><br><span class="line">                &quot;/docker-entrypoint.sh&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;maintainer&quot;: &quot;NGINX Docker Maintainers \u003cdocker-maint@nginx.com\u003e&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;StopSignal&quot;: &quot;SIGQUIT&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;7bf243ecad4eaf68d1f3c0ddde5bdc103e7855862419409e1becda93a0d3312f&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;HostIp&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">                        &quot;HostPort&quot;: &quot;80&quot;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/7bf243ecad4e&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;43bce532347d5b7cb2c2b38ab83b4bc332fe19be26dbc273a1a049c1924c6c21&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;f4645324feaef4dd22a2e8e1deafd7b4f68c7ab89862e1e6f13679fda4ff1ea0&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;43bce532347d5b7cb2c2b38ab83b4bc332fe19be26dbc273a1a049c1924c6c21&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<h2 id="docker-build【高频率】"><a href="#docker-build【高频率】" class="headerlink" title="docker build【高频率】"></a>docker build【高频率】</h2><h3 id="命令格式-19"><a href="#命令格式-19" class="headerlink" title="命令格式"></a>命令格式</h3><p><code>docker build [OPTIONS] PATH | URL | -</code></p>
<h3 id="命令说明-20"><a href="#命令说明-20" class="headerlink" title="命令说明"></a>命令说明</h3><ul>
<li><code>OPTIONS</code>：<ul>
<li><code>-f</code>：指定要使用的 <a href="#Dockerfile">Dockerfile</a> 路径。</li>
<li><code>--force-rm</code>：设置镜像过程中删除中间容器。</li>
<li><code>--rm</code>：整个构建过程成功后删除中间环节的容器。</li>
<li><code>-t</code>：设置镜像的名字及标签。</li>
</ul>
</li>
</ul>
<p>示例：<code>docker build -f docker.Dockerfile . -t registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:1.0.0</code></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -f docker.Dockerfile . -t registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:1.0.0</span></span><br><span class="line"></span><br><span class="line">[+] Building 6.6s (5/8)</span><br><span class="line">[+] Building 10.8s (9/9) FINISHED</span><br><span class="line"> =&gt; [internal] load build definition from docker.Dockerfile                                                                                                                                                                        0.1s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 1.65kB                                                                                                                                                                                             0.0s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                                                                                                                                                                                  0.1s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                                                                                                                                                                                    0.0s</span><br><span class="line"> =&gt; [internal] load metadata for registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:2.0.5                                                                                                                                     2.4s</span><br><span class="line"> =&gt; [auth] vaulka/genshinhelper:pull token for registry.cn-shanghai.aliyuncs.com                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; [1/3] FROM registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:2.0.5@sha256:51b64505eed8c2ab3d93ad4d6d82e9fadedd0a533bcf85ce1b626dc1883b573a                                                                               7.8s</span><br><span class="line"> =&gt; =&gt; resolve registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:2.0.5@sha256:51b64505eed8c2ab3d93ad4d6d82e9fadedd0a533bcf85ce1b626dc1883b573a                                                                               0.0s</span><br><span class="line"> =&gt; =&gt; sha256:51b64505eed8c2ab3d93ad4d6d82e9fadedd0a533bcf85ce1b626dc1883b573a 2.20kB / 2.20kB                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; sha256:05af8b2dccc64ec62088f487fde96d72eba1cad8f3305b473a328562b933d21c 7.29kB / 7.29kB                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; sha256:59bf1c3509f33515622619af21ed55bbe26d24913cedbca106468a5fb37a50c3 2.82MB / 2.82MB                                                                                                                                     1.2s</span><br><span class="line"> =&gt; =&gt; sha256:d8c681bc2183ac2de0b5e117ed74647ee5dfbdbf8a3730ac81c54f3b3db989f7 11.69MB / 11.69MB                                                                                                                                   4.1s</span><br><span class="line"> =&gt; =&gt; sha256:07a400e93df3fcc09e5f874878c049b15515236f55fbf76013c0779a7cc4a301 678.30kB / 678.30kB                                                                                                                                 0.5s</span><br><span class="line"> =&gt; =&gt; sha256:c7f1ca1171d975af881f16ba8005f599918648448f8d9b0be5436dd8ba3bf1f0 231B / 231B                                                                                                                                         0.8s</span><br><span class="line"> =&gt; =&gt; sha256:dc9256fcea2e541f17f0ed7d4dae23c03fb27a5ab8e7611e34f5a5e4d96d6678 2.35MB / 2.35MB                                                                                                                                     2.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:59bf1c3509f33515622619af21ed55bbe26d24913cedbca106468a5fb37a50c3                                                                                                                                          0.7s</span><br><span class="line"> =&gt; =&gt; sha256:b30f4df9527b7a4e63e7ba55184dd0e2d6b3060326d5686465169864f141e014 99B / 99B                                                                                                                                           1.7s</span><br><span class="line"> =&gt; =&gt; sha256:cf7bc792610be9a3ab6a74d487203a66cd6115eb40469cc6b44a38ff67383577 180B / 180B                                                                                                                                         2.1s</span><br><span class="line"> =&gt; =&gt; extracting sha256:07a400e93df3fcc09e5f874878c049b15515236f55fbf76013c0779a7cc4a301                                                                                                                                          0.6s</span><br><span class="line"> =&gt; =&gt; sha256:63f470fc1d34a37ea09d36f72e4d575ad49412e0d74143bd9fcbaf0d9e554a3d 6.00kB / 6.00kB                                                                                                                                     2.4s</span><br><span class="line"> =&gt; =&gt; sha256:4891bd3d558454877bdeda559053c38c4eb0914be411e8153d04869e12a7e57f 3.53MB / 3.53MB                                                                                                                                     5.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:d8c681bc2183ac2de0b5e117ed74647ee5dfbdbf8a3730ac81c54f3b3db989f7                                                                                                                                          1.7s</span><br><span class="line"> =&gt; =&gt; extracting sha256:c7f1ca1171d975af881f16ba8005f599918648448f8d9b0be5436dd8ba3bf1f0                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:dc9256fcea2e541f17f0ed7d4dae23c03fb27a5ab8e7611e34f5a5e4d96d6678                                                                                                                                          0.5s</span><br><span class="line"> =&gt; =&gt; extracting sha256:b30f4df9527b7a4e63e7ba55184dd0e2d6b3060326d5686465169864f141e014                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:cf7bc792610be9a3ab6a74d487203a66cd6115eb40469cc6b44a38ff67383577                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:63f470fc1d34a37ea09d36f72e4d575ad49412e0d74143bd9fcbaf0d9e554a3d                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:4891bd3d558454877bdeda559053c38c4eb0914be411e8153d04869e12a7e57f                                                                                                                                          0.5s</span><br><span class="line"> =&gt; [internal] load build context                                                                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 3.52kB                                                                                                                                                                                                0.0s</span><br><span class="line"> =&gt; [2/3] COPY config.json /app/genshincheckinhelper/config/config.example.json                                                                                                                                                    0.2s</span><br><span class="line"> =&gt; [3/3] COPY custom.py /usr/local/lib/python3.10/site-packages/onepush/providers/custom.py                                                                                                                                       0.0s</span><br><span class="line"> =&gt; exporting to image                                                                                                                                                                                                             0.1s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                                                                                                                                                                            0.0s</span><br><span class="line"> =&gt; =&gt; writing image sha256:d0c4ec4578025fb0a490beb567b760f8b1728c1a6545e4b35d8d18e581c71bbe                                                                                                                                       0.0s</span><br><span class="line"> =&gt; =&gt; naming to registry.cn-shanghai.aliyuncs.com/vaulka/genshinhelper:2.0.5_2021-12-29                                                                                                                                          0.0s</span><br><span class="line"></span><br><span class="line">Use &#x27;docker scan&#x27; to run Snyk tests against images to find vulnerabilities and learn how to fix them</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="容器生命周期"><a href="#容器生命周期" class="headerlink" title="容器生命周期"></a>容器生命周期</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641265787846.png"
                      alt="docker容器生命周期"
                ></p>
<h1 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a><a name="Dockerfile">Dockerfile</a></h1><p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/" >官方 Dockerfile 参考资料 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h1 id="Docker-Swarm-实战"><a href="#Docker-Swarm-实战" class="headerlink" title="Docker Swarm 实战"></a>Docker Swarm 实战</h1><h2 id="初始化-Docker-Swarm-集群"><a href="#初始化-Docker-Swarm-集群" class="headerlink" title="初始化 Docker Swarm 集群"></a>初始化 Docker Swarm 集群</h2><blockquote>
<p>WARN</p>
<p>主节点执行 <code>docker swarm init</code> 命令。</p>
<blockquote>
<p>主节点执行完命令后，控制台会打印 <code>docker swarm join --token xxx</code> 命令。从节点拷贝过去执行。（这里做演示，只采用单节点）</p>
</blockquote>
<p>从节点执行 <code>docker swarm join --token xxx</code> 命令。</p>
</blockquote>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker swarm init</span></span><br><span class="line"></span><br><span class="line">Swarm initialized: current node (4pjwzxpn29q2bq26b15pp1kp6) is now a manager.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following command:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-2v7325r8rvpmop0dvm42s8ac9gtt7bbpns6cadtr9836o0q5d0-5pnd2cy6m9ug102kolahyatcm 192.168.65.3:2377</span><br><span class="line"></span><br><span class="line">To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</span><br></pre></td></tr></table></figure></div>

<h2 id="创建-Swarm-网络"><a href="#创建-Swarm-网络" class="headerlink" title="创建 Swarm 网络"></a>创建 Swarm 网络</h2><p>在 Docker Swarm 部署中，如不指定网络，则每个服务默认会创建一个默认网络，如果有不同的服务需要互通，则会互通失败。所以创建一个 Swarm 网络，后续将服务加入进去。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641633942857.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker network create -d overlay --attachable global</span></span><br><span class="line"></span><br><span class="line">34p2q5z8oup6mzdqzjcno10aq</span><br></pre></td></tr></table></figure></div>

<h2 id="构建前端工程"><a href="#构建前端工程" class="headerlink" title="构建前端工程"></a>构建前端工程</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641634424562.png"
                      alt="image.png"
                ></p>
<p>文件目录层级</p>
<ul>
<li>nginx<ul>
<li>conf<ul>
<li>springboot.conf</li>
</ul>
</li>
<li>docker.Dockerfile</li>
<li>build.sh</li>
</ul>
</li>
</ul>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh build.sh</span></span><br><span class="line"></span><br><span class="line">[+] Building 8.6s (7/7) FINISHED                                                                                                                                                                                                                        </span><br><span class="line"> =&gt; [internal] load build definition from docker.Dockerfile                                                                                                                                                                                        0.0s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 102B                                                                                                                                                                                                               0.0s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                                                                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                                                                                                                                                                                                    0.0s</span><br><span class="line"> =&gt; [internal] load metadata for docker.io/library/nginx:1.21.5-alpine                                                                                                                                                                             4.8s</span><br><span class="line"> =&gt; [internal] load build context                                                                                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 460B                                                                                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; [1/2] FROM docker.io/library/nginx:1.21.5-alpine@sha256:eb05700fe7baa6890b74278e39b66b2ed1326831f9ec3ed4bdc6361a4ac2f333                                                                                                                       3.7s</span><br><span class="line"> =&gt; =&gt; resolve docker.io/library/nginx:1.21.5-alpine@sha256:eb05700fe7baa6890b74278e39b66b2ed1326831f9ec3ed4bdc6361a4ac2f333                                                                                                                       0.0s</span><br><span class="line"> =&gt; =&gt; sha256:eb05700fe7baa6890b74278e39b66b2ed1326831f9ec3ed4bdc6361a4ac2f333 1.65kB / 1.65kB                                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; sha256:544ba2bfe312bf2b13278495347bb9381ec342e630bcc8929af124f1291784bb 1.57kB / 1.57kB                                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; sha256:f3322597df46099a66ed5773c10a9d1cb587faca7be14ceba985e3d1fbfdbc36 7.35MB / 7.35MB                                                                                                                                                     3.0s</span><br><span class="line"> =&gt; =&gt; sha256:d09cf91cabdcf5f64672598b8e4da9b0b7d8546e83ec49633bdd92abb994ba61 602B / 602B                                                                                                                                                         1.5s</span><br><span class="line"> =&gt; =&gt; sha256:cc44224bfe208a46fbc45471e8f9416f66b75d6307573e29634e7f42e27a9268 8.89kB / 8.89kB                                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; sha256:59bf1c3509f33515622619af21ed55bbe26d24913cedbca106468a5fb37a50c3 2.82MB / 2.82MB                                                                                                                                                     1.5s</span><br><span class="line"> =&gt; =&gt; extracting sha256:59bf1c3509f33515622619af21ed55bbe26d24913cedbca106468a5fb37a50c3                                                                                                                                                          0.1s</span><br><span class="line"> =&gt; =&gt; sha256:3a97535ac2efcf94ab3e5f93a6ec4d934469de66909f17ba1229f86ee660970a 895B / 895B                                                                                                                                                         1.9s</span><br><span class="line"> =&gt; =&gt; sha256:919ade35f869e23d663ea51fdf2e99aa183239a73b4b4780e052c8b248ed5b7e 668B / 668B                                                                                                                                                         2.0s</span><br><span class="line"> =&gt; =&gt; sha256:40e5d2fe5bcd566dbde3e961f33ced0f1503fc6ee320a427b185a07afe2f96ae 1.40kB / 1.40kB                                                                                                                                                     2.4s</span><br><span class="line"> =&gt; =&gt; extracting sha256:f3322597df46099a66ed5773c10a9d1cb587faca7be14ceba985e3d1fbfdbc36                                                                                                                                                          0.3s</span><br><span class="line"> =&gt; =&gt; extracting sha256:d09cf91cabdcf5f64672598b8e4da9b0b7d8546e83ec49633bdd92abb994ba61                                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:3a97535ac2efcf94ab3e5f93a6ec4d934469de66909f17ba1229f86ee660970a                                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:919ade35f869e23d663ea51fdf2e99aa183239a73b4b4780e052c8b248ed5b7e                                                                                                                                                          0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:40e5d2fe5bcd566dbde3e961f33ced0f1503fc6ee320a427b185a07afe2f96ae                                                                                                                                                          0.0s</span><br><span class="line"> =&gt; [2/2] COPY /conf etc/nginx/conf.d                                                                                                                                                                                                              0.0s</span><br><span class="line"> =&gt; exporting to image                                                                                                                                                                                                                             0.0s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                                                                                                                                                                                            0.0s</span><br><span class="line"> =&gt; =&gt; writing image sha256:c0ad17b109cd4dc69539d0c10ded7c28a8971c0f7c9f10d0cb35b92b4609d3e7                                                                                                                                                       0.0s</span><br><span class="line"> =&gt; =&gt; naming to docker.io/library/ireadyit-nginx:prod-1.0.0                                                                                                                                                                                       0.0s</span><br><span class="line"></span><br><span class="line">Use &#x27;docker scan&#x27; to run Snyk tests against images to find vulnerabilities and learn how to fix them</span><br></pre></td></tr></table></figure></div>

<h2 id="构建后端工程"><a href="#构建后端工程" class="headerlink" title="构建后端工程"></a>构建后端工程</h2><blockquote>
<p>springBoot 项目可借助 Google Jib 插件构建镜像</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635082632.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./gradlew jibDockerBuild</span> </span><br><span class="line"></span><br><span class="line">Welcome to Gradle 7.3.2!</span><br><span class="line"></span><br><span class="line">Here are the highlights of this release:</span><br><span class="line"> - Easily declare new test suites in Java projects</span><br><span class="line"> - Support for Java 17</span><br><span class="line"> - Support for Scala 3</span><br><span class="line"></span><br><span class="line">For more details see https://docs.gradle.org/7.3.2/release-notes.html</span><br><span class="line"></span><br><span class="line">Starting a Gradle Daemon, 1 incompatible Daemon could not be reused, use --status for details</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Task :jibDockerBuild</span></span><br><span class="line"></span><br><span class="line">Containerizing application to Docker daemon as ireadyit-springboot, ireadyit-springboot:prod-1.1.0...</span><br><span class="line">Base image &#x27;registry.cn-shanghai.aliyuncs.com/vaulka/openjdk11-openj9:jre&#x27; does not use a specific image digest - build may not be reproducible</span><br><span class="line">The base image requires auth. Trying again for registry.cn-shanghai.aliyuncs.com/vaulka/openjdk11-openj9:jre...</span><br><span class="line">The credential helper (docker-credential-desktop) has nothing for server URL: registry.cn-shanghai.aliyuncs.com</span><br><span class="line"></span><br><span class="line">Got output:</span><br><span class="line"></span><br><span class="line">credentials not found in native keychain</span><br><span class="line"></span><br><span class="line">Using base image with digest: sha256:fc6a99645bf7371e8027b89fa9bd7562d52b30e1640a2313562d18bb02b38cb3</span><br><span class="line"></span><br><span class="line">Container entrypoint set to [java, -Xms330M, -Xmx512M, -Xmn100M, -XX:MetaspaceSize=100M, -XX:MaxDirectMemorySize=64M, -Dspring.profiles.active=prod, -Xshareclasses, -Xquickstart, -Duser.timezone=GMT+08, -Djava.security.egd=file:/dev/./urandom, -cp, @/app/jib-classpath-file, com.ireadyit.docker.Application]</span><br><span class="line"></span><br><span class="line">Built image to Docker daemon as ireadyit-springboot, ireadyit-springboot:prod-1.1.0</span><br><span class="line">Executing tasks:</span><br><span class="line">[==============================] 100.0% complete</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL in 11s</span><br><span class="line">3 actionable tasks: 2 executed, 1 up-to-date</span><br></pre></td></tr></table></figure></div>

<h2 id="部署-MySQL"><a href="#部署-MySQL" class="headerlink" title="部署 MySQL"></a>部署 MySQL</h2><h3 id="创建数据挂载文件夹"><a href="#创建数据挂载文件夹" class="headerlink" title="创建数据挂载文件夹"></a>创建数据挂载文件夹</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635526147.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh init.sh</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635585080.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh pull.sh</span></span><br><span class="line"></span><br><span class="line">Error: No such image: mysql:8.0</span><br><span class="line">8.0: Pulling from library/mysql</span><br><span class="line">72a69066d2fe: Pull complete </span><br><span class="line">93619dbc5b36: Pull complete </span><br><span class="line">99da31dd6142: Pull complete </span><br><span class="line">626033c43d70: Pull complete </span><br><span class="line">37d5d7efb64e: Pull complete </span><br><span class="line">ac563158d721: Pull complete </span><br><span class="line">d2ba16033dad: Pull complete </span><br><span class="line">688ba7d5c01a: Pull complete </span><br><span class="line">00e060b6d11d: Pull complete </span><br><span class="line">1c04857f594f: Pull complete </span><br><span class="line">4d7cfa90e6ea: Pull complete </span><br><span class="line">e0431212d27d: Pull complete </span><br><span class="line">Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709</span><br><span class="line">Status: Downloaded newer image for mysql:8.0</span><br><span class="line">docker.io/library/mysql:8.0</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="部署服务"><a href="#部署服务" class="headerlink" title="部署服务"></a>部署服务</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641635782084.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh start.sh</span></span><br><span class="line"></span><br><span class="line">Creating service mysql_mysql</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>服务名称组成：<code>stack指令定义的stack名称</code>_<code>yml定义服务名称</code></p>
</blockquote>
<h2 id="部署后端工程"><a href="#部署后端工程" class="headerlink" title="部署后端工程"></a>部署后端工程</h2><h3 id="部署服务-1"><a href="#部署服务-1" class="headerlink" title="部署服务"></a>部署服务</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636413731.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh start.sh</span></span><br><span class="line"></span><br><span class="line">Creating service springboot_springboot</span><br></pre></td></tr></table></figure></div>

<h2 id="部署前端工程"><a href="#部署前端工程" class="headerlink" title="部署前端工程"></a>部署前端工程</h2><h3 id="部署服务-2"><a href="#部署服务-2" class="headerlink" title="部署服务"></a>部署服务</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636650278.png"
                      alt="image.png"
                ></p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh start.sh</span></span><br><span class="line"></span><br><span class="line">Creating service nginx_nginx</span><br></pre></td></tr></table></figure></div>

<h2 id="验证服务"><a href="#验证服务" class="headerlink" title="验证服务"></a>验证服务</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641636754676.png"
                      alt="image.png"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/image-1641637064512.png"
                      alt="image.png"
                ></p>
<p>通过请求验证出服务已连通并且可用。</p>
<p>服务之间通过服务名称，即可互相访问，这是由于 Docker DNS server 将服务名称解析成容器内的 IP 实现的。</p>
<h2 id="Docker-Swarm-集群服务拓扑图"><a href="#Docker-Swarm-集群服务拓扑图" class="headerlink" title="Docker Swarm 集群服务拓扑图"></a>Docker Swarm 集群服务拓扑图</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://cdn.jsdelivr.net/gh/vaulka/pic@main/Docker%20Architecture.png"
                      alt="Docker Swarm 集群服务拓扑图"
                ></p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><blockquote>
<p>参考资料</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://docs.docker.com/" >Docker Documentation <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link"   target="_blank" rel="noopener" href="https://kubernetes.io/zh/docs/concepts/overview/what-is-kubernetes/" >Kubernetes 是什么？ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/weixx3/article/details/102579685" >Docker 概念术语 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link"   target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-command-manual.html" >Docker 命令大全 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> Docker 入门指北</li>
        <li><strong>作者:</strong> Vaulka</li>
        <li><strong>创建于:</strong> 2021-12-30 16:03:14</li>
        
            <li>
                <strong>更新于:</strong> 2023-06-26 10:22:55
            </li>
        
        <li>
            <strong>链接:</strong> https://vaulka.com/docker-study/
        </li>
        <li>
            <strong>版权声明:</strong> 本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 进行许可。
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/Docker/">#Docker</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/Docker-Swarm/">#Docker Swarm</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/could-not-resolve-bean-reference-against-beanfactory/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">ES 创建动态索引时，SpEL 表达式报错：Could not resolve bean reference against BeanFactory</span>
                                    <span class="post-nav-item">上一篇</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/kubernetes-study/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Kubernetes 学习指北</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;评论
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">Docker 入门指北</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8-Docker"><span class="nav-text">为什么用 Docker</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-%E5%AE%89%E8%A3%85"><span class="nav-text">Docker 安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-%E6%A6%82%E5%BF%B5"><span class="nav-text">Docker 概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%EF%BC%88Repository%EF%BC%89-%E9%9B%86%E4%B8%AD%E5%AD%98%E6%94%BE%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="nav-text">Docker 镜像仓库（Repository） 集中存放镜像文件的地方</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-%E9%95%9C%E5%83%8F%EF%BC%88Image%EF%BC%89%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">Docker 镜像（Image）一个特殊的文件系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-%E5%AE%B9%E5%99%A8%EF%BC%88Container%EF%BC%89%E9%95%9C%E5%83%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AE%9E%E4%BD%93"><span class="nav-text">Docker 容器（Container）镜像运行时的实体</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-%E6%8C%87%E4%BB%A4%EF%BC%88Command%EF%BC%89"><span class="nav-text">Docker 指令（Command）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-info"><span class="nav-text">docker info</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-version"><span class="nav-text">docker version</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-login"><span class="nav-text">docker login</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-logout"><span class="nav-text">docker logout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-search"><span class="nav-text">docker search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-pull%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker pull【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="nav-text">命令格式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E"><span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90"><span class="nav-text">命令执行分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-images%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker images【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-1"><span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90-1"><span class="nav-text">命令执行分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-tag%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker tag【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-1"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-2"><span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90-2"><span class="nav-text">命令执行分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-history"><span class="nav-text">docker history</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-2"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-3"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-push%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker push【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-3"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-4"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-rmi%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker rmi【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-4"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-5"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-run%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker run【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-5"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-6"><span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90-3"><span class="nav-text">命令执行分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-ps%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker ps【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-6"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-7"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-exec%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker exec【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-7"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-8"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-stop"><span class="nav-text">docker stop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-8"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-9"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-start"><span class="nav-text">docker start</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-9"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-10"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-restart"><span class="nav-text">docker restart</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-10"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-11"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-logs%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker logs【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-11"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-12"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-commit"><span class="nav-text">docker commit</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-12"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-13"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-diff"><span class="nav-text">docker diff</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-13"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-14"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-cp"><span class="nav-text">docker cp</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-14"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-15"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-rm%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker rm【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-15"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-16"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-events"><span class="nav-text">docker events</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-16"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-17"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-stats"><span class="nav-text">docker stats</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-17"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-18"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-inspect"><span class="nav-text">docker inspect</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-18"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-19"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-build%E3%80%90%E9%AB%98%E9%A2%91%E7%8E%87%E3%80%91"><span class="nav-text">docker build【高频率】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F-19"><span class="nav-text">命令格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-20"><span class="nav-text">命令说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">容器生命周期</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dockerfile"><span class="nav-text">Dockerfile</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-Swarm-%E5%AE%9E%E6%88%98"><span class="nav-text">Docker Swarm 实战</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-Docker-Swarm-%E9%9B%86%E7%BE%A4"><span class="nav-text">初始化 Docker Swarm 集群</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Swarm-%E7%BD%91%E7%BB%9C"><span class="nav-text">创建 Swarm 网络</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B"><span class="nav-text">构建前端工程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%90%8E%E7%AB%AF%E5%B7%A5%E7%A8%8B"><span class="nav-text">构建后端工程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2-MySQL"><span class="nav-text">部署 MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%8C%82%E8%BD%BD%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-text">创建数据挂载文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="nav-text">拉取镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1"><span class="nav-text">部署服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E5%B7%A5%E7%A8%8B"><span class="nav-text">部署后端工程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1-1"><span class="nav-text">部署服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B"><span class="nav-text">部署前端工程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1-2"><span class="nav-text">部署服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1"><span class="nav-text">验证服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-Swarm-%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E6%8B%93%E6%89%91%E5%9B%BE"><span class="nav-text">Docker Swarm 集群服务拓扑图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text"></span></a></li></ol></li></ol></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Vaulka</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br>
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.2.1</a>
        </div>
        
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    


</main>



<script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/utils.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/main.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/layouts/navbarShrink.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/tools/scrollTopBottom.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/tools/lightDarkSwitch.js"></script>




    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/tools/codeBlock.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/layouts/lazyload.js"></script>



    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/tools/runtime.js"></script>
    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/libs/odometer.min.js"></script>
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/assets/odometer-theme-minimal.css">



  <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/libs/Typed.min.js"></script>
  <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/plugins/typed.js"></script>






<div class="post-scripts pjax">
    
        <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/tools/tocToggle.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/libs/anime.min.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/layouts/toc.js"></script><script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/plugins/tabs.js"></script>
    
</div>


    <script src="https://evan.beee.top/projects/hexo-theme-redefine@2.2.1/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
